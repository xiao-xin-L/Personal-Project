(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-745b5162"],{"534f":function(e,t,n){"use strict";n("96cf");var r=n("1da1"),a=n("d4ec"),i=n("bee2"),s=n("ecb7"),u=n("773f"),c=function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,[{key:"registerUser",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].post("".concat(u["a"].baseApiUrl,"/authentication/registerUser"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loginUser",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].post("".concat(u["a"].baseApiUrl,"/authentication/loginUser"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkPermission",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].get("".concat(u["a"].baseApiUrl,"/authentication/checkPermission")));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateUserInfo",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].post("".concat(u["a"].baseApiUrl,"/authentication/updateUserInfo"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUnapprovedUserList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].get("".concat(u["a"].baseApiUrl,"/authentication/unapprovedUser"),{params:t}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAllUserList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].get("".concat(u["a"].baseApiUrl,"/authentication/unAllUser"),{params:t}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"approvedUser",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].post("".concat(u["a"].baseApiUrl,"/authentication/approvedUser"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unApprovedUser",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].post("".concat(u["a"].baseApiUrl,"/authentication/unApprovedUser"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteUser",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].post("".concat(u["a"].baseApiUrl,"/authentication/deleteUser"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setAdmin",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].post("".concat(u["a"].baseApiUrl,"/authentication/setAdmin"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cancelAdmin",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].post("".concat(u["a"].baseApiUrl,"/authentication/cancelAdmin"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUserRegisterInfo",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].get("".concat(u["a"].baseApiUrl,"/authentication/userRegisterInfo")));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();t["a"]=new c},e9b7:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList}},[n("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"180"}}),n("el-table-column",{attrs:{prop:"avatar",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-image",{staticStyle:{width:"100px"},attrs:{fit:"fill",src:e.row.avatar}})]}}])}),n("el-table-column",{attrs:{prop:"introduction",label:"用户简介"}}),n("el-table-column",{attrs:{label:"是否冻结账户"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{value:!t.row.approved,"active-color":"#13ce66","inactive-color":"#c0ccda"},on:{change:function(n){return e.switchApproved(t.row)}}})]}}])}),n("el-table-column",{attrs:{label:"是否设置为管理员"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#c0ccda"},on:{change:function(n){return e.switchAdmin(t.row)}},model:{value:t.row.isAdmin,callback:function(n){e.$set(t.row,"isAdmin",n)},expression:"scope.row.isAdmin"}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"danger"},on:{click:function(n){return e.rejectedUser(t.row)}}},[e._v("删除")])]}}])})],1),n("div",{staticStyle:{display:"flex","justify-content":"center","margin-top":"20px"}},[n("el-pagination",{attrs:{layout:"prev, pager, next",total:e.userTotalNum,"page-size":e.searchUserParams.limit},on:{"current-change":e.handleUserCurrentChange}})],1)],1)},a=[],i=n("534f"),s={name:"Permission",data:function(){return{searchUserParams:{limit:10,offset:0},userTotalNum:0,userList:[]}},created:function(){this.getUserList()},methods:{switchApproved:function(e){var t=this;e.approved=!e.approved,this.$confirm("此操作将改变此用户的权限, 后续影响极大, 请问是否继续?","警告",{confirmButtonText:"我考虑清楚了, 我就要这么干!!!",cancelButtonText:"不干了",type:"warning"}).then((function(){e.approved?i["a"].approvedUser({key:e.key}).then((function(){t.$message({type:"success",message:"解冻成功"})})):i["a"].unApprovedUser({key:e.key}).then((function(){t.$message({type:"success",message:"冻结成功"})}))})).catch((function(){e.isAdmin=!e.isAdmin,t.$message({type:"info",message:"取消操作"})}))},switchAdmin:function(e){var t=this;this.$confirm("此操作将改变此用户的权限, 后续影响极大, 请问是否继续?","警告",{confirmButtonText:"我考虑清楚了, 我就要这么干!!!",cancelButtonText:"不干了",type:"warning"}).then((function(){e.approved?e.isAdmin?i["a"].setAdmin({key:e.key}).then((function(){t.$message({type:"success",message:"更改权限成功"})})):i["a"].cancelAdmin({key:e.key}).then((function(){t.$message({type:"success",message:"更改权限成功"})})):(e.isAdmin=!e.isAdmin,t.$message({type:"warning",message:"该用户还没有通过审核"}))})).catch((function(){e.isAdmin=!e.isAdmin,t.$message({type:"info",message:"取消操作"})}))},getUserList:function(){var e=this;i["a"].getAllUserList(this.searchUserParams).then((function(t){e.userTotalNum=t.data.data.userTotalNum,e.userList=t.data.data.userList}))},rejectedUser:function(e){var t=this;this.$confirm("此操作将永久删除该用户以及其所有博客, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i["a"].deleteUser({key:e.key}).then((function(e){200===e.status&&(t.$message.success("删除成功"),t.getUserList())}))})).catch((function(){}))},handleUserCurrentChange:function(e){this.searchUserParams.offset=(e-1)*this.searchUserParams.limit,this.getUserList()}}},u=s,c=n("2877"),o=Object(c["a"])(u,r,a,!1,null,"10c6b72e",null);t["default"]=o.exports}}]);